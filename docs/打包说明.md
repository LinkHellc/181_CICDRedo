# MBD_CICDKits 打包说明

## 打包日期
2026-02-26

## 打包工具
- PyInstaller 6.17.0
- Python 3.11.9

## 打包结果

### 输出目录
```
dist/MBD_CICDKits/
```

### 可执行文件
```
MBD_CICDKits.exe (3.13 MB)
```

### 总大小
约 **90.9 MB**

## 目录结构

```
dist/MBD_CICDKits/
├── MBD_CICDKits.exe          # 主程序
└── _internal/                # 依赖文件
    ├── python311.dll         # Python 运行时
    ├── PyQt6/                # Qt 框架
    ├── src/                  # 源代码模块
    │   └── ui/
    │       └── resources/
    │           ├── fonts/    # 字体资源
    │           │   ├── Poppins-Bold.ttf
    │           │   └── Poppins-Regular.ttf
    │           └── icons/    # 图标资源
    │               └── app.ico
    ├── docs/                 # 文档
    │   └── MATLAB_ENGINE_安装指南.md
    └── ...                   # 其他依赖库
```

## 分发方式

### 方法 1: ZIP 压缩包（推荐）
```bash
# 在 dist 目录下创建 ZIP 文件
cd dist
powershell Compress-Archive -Path MBD_CICDKits -DestinationPath MBD_CICDKits_v0.1.0.zip
```

### 方法 2: 7-Zip 压缩
```bash
# 使用 7-Zip 创建自解压包
7z a -sfx MBD_CICDKits_v0.1.0.exe .\dist\MBD_CICDKits\*
```

## 用户安装说明

### 系统要求
- Windows 10/11 (64位)
- 无需安装 Python 或其他依赖

### 安装步骤
1. 解压下载的 ZIP 文件
2. 将 `MBD_CICDKits` 文件夹放到任意位置
3. 双击运行 `MBD_CICDKits.exe`

### 首次运行
首次运行时，应用会：
1. 创建配置目录: `%APPDATA%/MBD_CICDKits/`
2. 创建日志目录: `%APPDATA%/MBD_CICDKits/logs/`
3. 创建项目目录: `%APPDATA%/MBD_CICDKits/projects/`

## 打包配置

### Spec 文件
`MBD_CICDKits.spec` - PyInstaller 配置文件

### 包含的资源
- 字体文件: Poppins (Regular, Bold)
- 应用图标: app.ico
- MATLAB Engine 安装指南

### 排除的模块
- tkinter, unittest, test, pytest
- IPython, jupyter, notebook
- matlab, matlabengine (需单独安装)

## 打包命令

### 完整打包
```bash
python build_exe.py
```

### 单独使用 PyInstaller
```bash
pyinstaller MBD_CICDKits.spec --clean
```

### 查看警告
```bash
# 查看打包警告
cat build/MBD_CICDKits/warn-MBD_CICDKits.txt
```

## 版本信息

| 项目 | 版本 |
|------|------|
| 应用名称 | MBD_CICDKits |
| 版本号 | 0.1.0 |
| Python | 3.11.9 |
| PyInstaller | 6.17.0 |
| PyQt6 | 最新 |

## 已知问题

### MATLAB Engine
- MATLAB Engine 无法打包到可执行文件中
- 如需使用 MATLAB 代码生成功能，用户需单独安装
- 安装指南: `%APPDATA%/MBD_CICDKits/docs/MATLAB_ENGINE_安装指南.md`

### 字体加载
- 字体文件嵌入到可执行文件中
- 使用 `get_resource_path()` 获取资源路径
- 支持 PyInstaller 打包后的路径解析

## 更新日志

### v0.1.0 (2026-02-26)
- 初始打包版本
- 支持完整 CI/CD 工作流（除 MATLAB 生成外）
- 包含响应式 UI 设计
- 支持 A2L 文件处理（纯 Python 实现）
- 支持 IAR 编译集成
- 支持文件打包归档

## 技术支持

如遇问题，请查看：
1. 应用日志: `%APPDATA%/MBD_CICDKits/logs/`
2. 用户指南: `CLAUDE.md`
3. 需求文档: `00_用户输入需求与材料/MBD_CICDKits需求.md`

## 开发者注意事项

### 修改后重新打包
1. 清理旧的打包目录
```bash
rmdir /s /q build dist
```

2. 重新运行打包脚本
```bash
python build_exe.py
```

### 添加新资源文件
修改 `MBD_CICDKits.spec` 中的 `datas` 字段：
```python
datas=[
    ('新资源路径', '目标路径'),
],
```

### 添加新的隐藏导入
修改 `MBD_CICDKits.spec` 中的 `hiddenimports` 字段：
```python
hiddenimports=[
    '新模块名',
],
```
